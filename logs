2025-08-01 20:04:53,140 - TradingStrategy - INFO - TradingStrategy initialized (S&R focus).
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG - Initial reference candle set for strike 24500: Prev_High=323.7, Prev_Low=319.0. S&R levels for this strike are currently empty.
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG - --- Processing Candle (09:00:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG -   Candle OHLC: O:321.65, H:325.20, L:321.85, C:323.85
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG -   Previous Candle Ref: High=323.70, Low=319.00
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {}, 'primary_sequence_focus': None, 'next_expected_secondary_level': None}
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG -   [HIST] Initial S1 established due to UP breakout for 24500. S1 range H:323.70/L:321.85. Primary focus: S1_SEQUENCE_PRIMARY.
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG -   [HIST] Implicit R1 established for 24500 (tracking). R1 range H:325.20/L:319.00.
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG - --- Processing Candle (09:05:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,140 - TradingStrategy - DEBUG -   Candle OHLC: O:323.95, H:327.70, L:318.95, C:322.25
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   Previous Candle Ref: High=325.20, Low=321.85
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': np.float64(323.7), 'low': 321.85, 'breakout_type': 'INITIAL_DOWN_BREAKOUT', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:00:00')}, 'R1': {'high': 325.2, 'low': np.float64(319.0), 'breakout_type': 'INITIAL_UP_BREAKOUT', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:00:00')}}, 'primary_sequence_focus': 'S1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': False, 's1_is_tracking': False, 'r1_is_tracking': True, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [HIST] Established S1 (321.85) BREACHED DOWN by current candle low (318.95) for 24500. S1 now TRACKING, S2 resets.
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [HIST] Primary sequence for 24500 shifted to R1_SEQUENCE_PRIMARY. Next secondary: R2. Skipping further S&R rules for this candle.
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 327.70, prev_low for 24500: 318.95
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG - --- Processing Candle (09:10:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   Candle OHLC: O:322.15, H:321.80, L:317.20, C:318.05
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   Previous Candle Ref: High=327.70, Low=318.95
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 327.7, 'low': 318.95, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': np.float64(319.0), 'breakout_type': 'INITIAL_UP_BREAKOUT', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:00:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': False, 's1_is_tracking': True, 'r1_is_tracking': True, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': False, 's1_is_tracking': True, 'r1_is_tracking': True, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S1 low updated to 317.20 while tracking.
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S1 tracking for 24500: current range H:327.70, L:317.20
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] R1 low updated to 317.20 while tracking.
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] R1 tracking for 24500: current range H:325.20, L:317.20
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 317.2, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'INITIAL_UP_BREAKOUT', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:00:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': False, 's1_is_tracking': True, 'r1_is_tracking': True, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: False, R2 exists: False, R2 is tracking: False
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: False, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 317.2, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'INITIAL_UP_BREAKOUT', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:00:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': False, 's1_is_tracking': True, 'r1_is_tracking': True, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: True, R1 is_tracking: True
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [HIST] R1 re-tracked DOWN for strike 24500: Established at H:325.20. Is Established: True (Current High: 321.80).
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] R1 (Resistance) has been established at range H:325.20, L:317.20.
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 317.2, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: False, S2 exists: False, R2 exists: False
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 317.2, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 317.2, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,141 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 317.2, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG - --- End of Candle (09:10:00) S&R for strike 24500 ---
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 321.80, prev_low for 24500: 317.20
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG - --- Processing Candle (09:15:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -   Candle OHLC: O:317.80, H:320.70, L:316.00, C:319.25
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -   Previous Candle Ref: High=321.80, Low=317.20
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 327.7, 'low': 317.2, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,142 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S1 low updated to 316.00 while tracking.
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S1 tracking for 24500: current range H:327.70, L:316.00
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 316.0, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: True, R2 exists: False, R2 is tracking: False
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: False, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 316.0, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: True, R1 is_tracking: False
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 316.0, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: False, S2 exists: False, R2 exists: False
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 316.0, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 316.0, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 316.0, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG - --- End of Candle (09:15:00) S&R for strike 24500 ---
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 320.70, prev_low for 24500: 316.00
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG - --- Processing Candle (09:20:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   Candle OHLC: O:319.85, H:320.90, L:313.55, C:314.05
2025-08-01 20:04:53,143 - TradingStrategy - DEBUG -   Previous Candle Ref: High=320.70, Low=316.00
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 327.7, 'low': 316.0, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S1 low updated to 313.55 while tracking.
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S1 tracking for 24500: current range H:327.70, L:313.55
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: True, R2 exists: False, R2 is tracking: False
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: False, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: True, R1 is_tracking: False
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: False, S2 exists: False, R2 exists: False
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG - --- End of Candle (09:20:00) S&R for strike 24500 ---
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 320.90, prev_low for 24500: 313.55
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG - --- Processing Candle (09:25:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   Candle OHLC: O:314.85, H:315.95, L:314.20, C:315.40
2025-08-01 20:04:53,144 - TradingStrategy - DEBUG -   Previous Candle Ref: High=320.90, Low=313.55
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S1 tracking for 24500: current range H:327.70, L:313.55
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: True, R2 exists: False, R2 is tracking: False
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: False, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:05:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: True, R1 is_tracking: False
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [HIST] S1 re-tracked UP for strike 24500: Established at L:313.55. Is Established: True (Current Low: 314.20).
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S1 (Support) has been established at range H:327.70, L:313.55.
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:25:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: True, S2 exists: False, R2 exists: False
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [HIST] R2 tracking initiated as R1 and S1 established for 24500. R2 high=315.95, low=314.20.
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] R2 (Secondary Resistance) tracking has started with range H:315.95, L:314.20.
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:25:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 315.95000000000005, 'low': 314.2, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:25:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:25:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 315.95000000000005, 'low': 314.2, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:25:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:25:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 315.95000000000005, 'low': 314.2, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:25:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG - --- End of Candle (09:25:00) S&R for strike 24500 ---
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,145 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 315.95, prev_low for 24500: 314.20
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG - --- Processing Candle (09:30:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   Candle OHLC: O:314.90, H:317.85, L:305.95, C:305.15
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   Previous Candle Ref: High=315.95, Low=314.20
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 327.7, 'low': 313.55, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:25:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 315.95000000000005, 'low': 314.2, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:25:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [HIST] Established S1 (313.55) BREACHED DOWN by current candle low (305.95) for 24500. S1 now TRACKING, S2 resets.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [HIST] Primary sequence for 24500 shifted to R1_SEQUENCE_PRIMARY. Next secondary: R2. Skipping further S&R rules for this candle.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 317.85, prev_low for 24500: 305.95
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG - --- Processing Candle (09:35:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   Candle OHLC: O:305.40, H:311.20, L:307.65, C:311.35
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   Previous Candle Ref: High=317.85, Low=305.95
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:30:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S1 tracking for 24500: current range H:317.85, L:305.95
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:30:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: True, R2 exists: False, R2 is tracking: False
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: False, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'S1_BREACH_DIRECT', 'direction': 'DOWN', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:30:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': False, 'r1_is_established': True, 's1_is_tracking': True, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: True, R1 is_tracking: False
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [HIST] S1 re-tracked UP for strike 24500: Established at L:305.95. Is Established: True (Current Low: 307.65).
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S1 (Support) has been established at range H:317.85, L:305.95.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'R2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: True, S2 exists: False, R2 exists: False
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [HIST] R2 tracking initiated as R1 and S1 established for 24500. R2 high=311.20, low=307.65.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] R2 (Secondary Resistance) tracking has started with range H:311.20, L:307.65.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.20000000000005, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.20000000000005, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.20000000000005, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,146 - TradingStrategy - DEBUG - --- End of Candle (09:35:00) S&R for strike 24500 ---
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 311.20, prev_low for 24500: 307.65
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG - --- Processing Candle (09:40:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   Candle OHLC: O:311.15, H:311.75, L:309.85, C:310.30
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   Previous Candle Ref: High=311.20, Low=307.65
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.20000000000005, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] R2 high updated to 311.75 while tracking.
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] R2 tracking for 24500: current range H:311.75, L:307.65
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.75, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: True, R2 exists: True, R2 is tracking: True
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: True, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.75, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: False, R1 is_tracking: False
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.75, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: True, S2 exists: False, R2 exists: True
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.75, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.75, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.75, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG - --- End of Candle (09:40:00) S&R for strike 24500 ---
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 311.75, prev_low for 24500: 309.85
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG - --- Processing Candle (09:45:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   Candle OHLC: O:311.20, H:314.15, L:306.70, C:307.90
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   Previous Candle Ref: High=311.75, Low=309.85
2025-08-01 20:04:53,147 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 311.75, 'low': 307.65, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] R2 high updated to 314.15 while tracking.
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] R2 low updated to 306.70 while tracking.
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] R2 tracking for 24500: current range H:314.15, L:306.70
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: True, R2 exists: True, R2 is tracking: True
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: True, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: False, R1 is_tracking: False
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: True, S2 exists: False, R2 exists: True
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,148 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG - --- End of Candle (09:45:00) S&R for strike 24500 ---
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 314.15, prev_low for 24500: 306.70
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG - --- Processing Candle (09:50:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   Candle OHLC: O:307.90, H:311.15, L:309.50, C:311.60
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   Previous Candle Ref: High=314.15, Low=306.70
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [STEP] Calling _update_tracking_ranges...
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] Checking for tracking range updates for 24500.
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] R2 tracking for 24500: current range H:314.15, L:306.70
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [RESULT] Tracking ranges updated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_breach_active_secondary...
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_breach_active_secondary for 24500. Current R1 is_established: True, R2 exists: True, R2 is tracking: True
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] Current S1 is_established: True, S2 exists: False, S2 is tracking: False
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [RESULT] Primary breach with active secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [STEP] Calling _check_and_establish_primary...
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,149 - TradingStrategy - DEBUG -   [LOG] Entering _check_and_establish_primary for 24500. S1 is_tracking: False, R1 is_tracking: False
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [RESULT] Primary levels checked/established. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [STEP] Calling _initiate_secondary_levels...
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] Entering _initiate_secondary_levels for 24500. R1 established: True, S1 established: True, S2 exists: False, R2 exists: True
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [RESULT] Secondary levels initiated. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [STEP] Calling _handle_primary_advancement_by_secondary...
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] Entering _handle_primary_advancement_by_secondary for 24500.
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [RESULT] Primary advancement by secondary handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 325.2, 'low': 317.2, 'breakout_type': 'RETRACKED_DOWN', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:10:00')}, 'R2': {'high': 314.15, 'low': 306.7, 'breakout_type': 'INITIATED_AFTER_R1_S1_ESTABLISHED', 'direction': 'UP', 'is_established': False, 'timestamp': Timestamp('2025-08-01 09:35:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [STEP] Calling _handle_secondary_consolidation...
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': True, 's2_is_tracking': False, 'r2_is_tracking': True}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] Entering _handle_secondary_consolidation for 24500.
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [HIST] R2 re-tracked DOWN for strike 24500: Range H:314.15/L:306.70. Is Established: True. R1 takes R2's value.
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] R2 (Secondary Resistance) consolidated. R1 is now taking on its value: H:314.15, L:306.70.
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [RESULT] Secondary consolidation handled. Current S&R State: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 314.15, 'low': 306.7, 'breakout_type': 'CONSOLIDATED_FROM_R2', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:50:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG - --- End of Candle (09:50:00) S&R for strike 24500 ---
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -     FINAL primary_sequence_focus for 24500: R1_SEQUENCE_PRIMARY
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 311.15, prev_low for 24500: 309.50
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG - --- Processing Candle (09:55:00) for S&R for strike 24500 ---
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   Candle OHLC: O:311.60, H:307.70, L:303.75, C:301.05
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   Previous Candle Ref: High=311.15, Low=309.50
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   Initial S&R State for 24500: {'sr_levels': {'S1': {'high': 317.85, 'low': 305.95, 'breakout_type': 'RETRACKED_UP', 'direction': 'DOWN', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:35:00')}, 'R1': {'high': 314.15, 'low': 306.7, 'breakout_type': 'CONSOLIDATED_FROM_R2', 'direction': 'UP', 'is_established': True, 'timestamp': Timestamp('2025-08-01 09:50:00')}}, 'primary_sequence_focus': 'R1_SEQUENCE_PRIMARY', 'next_expected_secondary_level': 'S2'}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [LOG] S&R Flags for 24500: {'s1_exists': True, 'r1_exists': True, 's1_is_established': True, 'r1_is_established': True, 's1_is_tracking': False, 'r1_is_tracking': False, 's2_exists': False, 'r2_exists': False, 's2_is_tracking': False, 'r2_is_tracking': False}
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [HIST] Established S1 (305.95) BREACHED DOWN by current candle low (303.75) for 24500. S1 now TRACKING, S2 resets.
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -   [HIST] Primary sequence for 24500 shifted to R1_SEQUENCE_PRIMARY. Next secondary: R2. Skipping further S&R rules for this candle.
2025-08-01 20:04:53,150 - TradingStrategy - DEBUG -     FINAL prev_high for 24500: 307.70, prev_low for 24500: 303.75
2025-08-01 20:04:53,150 - SupportResistanceCalculation - DEBUG - Processing S&R for straddle: SYNTHETIC_ATMP_ITMC_24500_24550_20250807
